package com.ai.core.view.accordion {		import flash.display.MovieClip;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;		import caurina.transitions.Tweener;
		public class Accordion extends MovieClip {		private var mywidth:Number;		private var myheight:Number;		private var navW:Number;		private var navH:Number;		private var panelN:Number;		private var panelW:Number;		private var panelH:Number;		private var panelWithBtnWidth:Number;		private var panelWithBtnHeight:Number;		public var currpanel:Number;		private var vertical:Boolean;				public static const EVENT_ON_CHANGE:String = "Accordion.EVENT_ON_CHANGE";				public function Accordion($width:Number, $height:Number, panelNumber:Number = 0, navWidth:Number = 0, navHeight:Number = 0, allignment:Boolean = false) {			vertical=allignment;			mywidth  = $width;			myheight = $height;			panelN = panelNumber;			navW = navWidth;			navH = navHeight;			graphics.beginFill(0x000000);			graphics.drawRect(0,0, mywidth, myheight);			graphics.endFill();			panelW = $width-panelNumber*navWidth;			panelH = $height-panelNumber*navHeight;			panelWithBtnWidth=panelW+navWidth;			panelWithBtnHeight=panelH+navHeight;			var mk:Sprite = new Sprite();			mk.graphics.beginFill(0x000000);			mk.graphics.drawRect(0,0, mywidth, myheight);			mk.graphics.endFill();			addChild(mk);			mask = mk;		}				public function openPanel(pNumber:Number):void {			var obj:Object;			var i:int;					for(i=1; i<numChildren; i++){				obj = getChildAt(i) as Sprite;				obj.getChildByName("btn").addEventListener(MouseEvent.CLICK, handleOpenClick);				obj.getChildByName("btn").buttonMode=true;			}			obj = getChildAt(pNumber) as Sprite;			obj.getChildByName("btn").buttonMode=false;			obj.getChildByName("btn").removeEventListener(MouseEvent.CLICK, handleOpenClick);			for(i=pNumber+1; i<numChildren;i++){				obj = getChildAt(i);				////////////////////////				if (!vertical)  Tweener.addTween(obj, {x:mywidth-(numChildren-i)*navW, time:0.2, transition:"easeOutCubic", rounded:true});				else Tweener.addTween(obj, {y:myheight-(numChildren-i)*navH, time:0.2, transition:"easeOutCubic", rounded:true});				////////////////////////			}			for(i=1; i<=pNumber;i++){				obj = getChildAt(i);				////////////////////////				if (!vertical) Tweener.addTween(obj, {x:(i-1)*navW, time:0.2, transition:"easeOutCubic", rounded:true});				else Tweener.addTween(obj, {y:(i-1)*navH, time:0.3, transition:"easeOutCubic", rounded:true});				////////////////////////			}			currpanel=pNumber;			dispatchEvent(new Event(EVENT_ON_CHANGE));					}				public function addPanel(btnBackground:MovieClip, contMovie:MovieClip, title:String = null) :void{			var pnl:Sprite = new Sprite();			//var color:uint = Math.round( Math.random()*0xFFFFFF );			var color:uint = Math.round( 0x000000 );			pnl.graphics.beginFill(color);			/////////////////			if (!vertical) pnl.graphics.drawRect(0,0,panelWithBtnWidth,myheight);			else pnl.graphics.drawRect(0,0,mywidth,panelWithBtnHeight);			/////////////////			pnl.graphics.endFill();			var btn:MovieClip = getBtnBase();			var msk:MovieClip = getBtnBase();			pnl.addChild(btnBackground);			pnl.addChild(btn);			btn.addChild(msk);			btn.mask = msk;			if(title)				btnBackground.label.htmlText = title;			var localcont:MovieClip = contMovie;			pnl.addChild(localcont);			/////////////////			if (!vertical) localcont.x+=navW;			else localcont.y+=navH;			/////////////////			var contmask:MovieClip = getContentBase();			//localcont.addChild(contmask);			//localcont.mask = contmask;			this.addChild(pnl);			/////////////////			if (!vertical) pnl.x= (numChildren-2)*navW;			else pnl.y= (numChildren-2)*navH;			/////////////////			btn.panelNumber = numChildren-1;			btn.mouseChildren=false;			btn.buttonMode=true;			btn.name="btn";		}				public function getPanelContentsAt(i:int):MovieClip{			var obj:Sprite = getChildAt(i) as Sprite;			return obj.getChildAt(2) as MovieClip;			//trace(this.getChildAt(i).getChildAt(0));		}				private function handleOpenClick(evt:Event) :void {			if(evt.target.panelNumber){				openPanel(evt.target.panelNumber);			}		}				private function getBtnBase():MovieClip{			var btn:MovieClip = new MovieClip();			var color:uint = Math.round(Math.random()*0xFFFFFF);			btn.graphics.beginFill(color,0);			/////////////////			if (!vertical) btn.graphics.drawRect(0,0,navW,myheight);			else btn.graphics.drawRect(0,0,mywidth,navH);			/////////////////			btn.graphics.endFill();			return btn;		}						private function getContentBase():MovieClip{			var cont:MovieClip = new MovieClip();			var color:uint = Math.round(Math.random()*0xFFFFFF);			cont.graphics.beginFill(color,0.5);			/////////////////			if (!vertical) cont.graphics.drawRect(0,0,panelW,myheight);			else cont.graphics.drawRect(0,0,mywidth,panelH);			/////////////////			cont.graphics.endFill();			return cont;		}	}}